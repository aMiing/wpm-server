(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ad66ab6"],{"37f9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("vab-query-form",[a("el-form",{ref:"form",attrs:{model:e.queryForm,inline:!0,size:"medium"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"输入名称或编号搜索",clearable:""},on:{clear:e.clearSearchKey},model:{value:e.queryForm.title,callback:function(t){e.$set(e.queryForm,"title",t)},expression:"queryForm.title"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary","native-type":"submit"},on:{click:e.handleQuery}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"checkbox-content type-select"},[a("span",[e._v("按类型筛选：")]),e._l(e.queryForm.filtType,(function(t,r){return a("el-checkbox",{key:r,attrs:{label:t.label,border:""},model:{value:t.select,callback:function(a){e.$set(t,"select",a)},expression:"type.select"}})})),a("el-button",{staticClass:"select-all",attrs:{type:"text"},on:{click:e.selectAllTypes}},[e._v("反选")])],2),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{data:e.list,"element-loading-text":e.elementLoadingText,height:e.height},on:{"selection-change":e.setSelectRows,"sort-change":e.tableSortChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"编号",prop:"uuid",width:"240"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",label:"名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"price",label:"单价"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"库存",prop:"stock",sortable:""}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"生产商",prop:"author"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"所属类别",prop:"type",sortable:"","sort-by":"type"}}),a("el-table-column",{attrs:{label:"加入购物车",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input-number",{attrs:{min:0,max:r.stock,step:1,"step-strictly":""},on:{change:function(t){return e.addedChange(r)}},model:{value:r.saled,callback:function(t){e.$set(r,"saled",t)},expression:"row.saled"}})]}}])})],1),a("el-pagination",{attrs:{background:e.background,"current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)},o=[],n=a("1da1"),l=a("5530"),i=(a("d81d"),a("7db0"),a("a9e3"),a("4160"),a("159b"),a("4795"),a("96cf"),a("ad8f"),a("2f62")),s={name:"Index",filters:{},data:function(){return{imgShow:!0,imageList:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",background:!0,selectRows:"",elementLoadingText:"正在加载...",queryForm:{pageNo:1,pageSize:20,title:"",filtType:[{label:"化妆品",select:!0},{label:"电子产品",select:!0}]}}},computed:Object(l["a"])(Object(l["a"])({},Object(i["c"])({list:"goods/getFiltList",total:"goods/getTotal",allTypes:"goods/getAllTypes",cartList:"cart/getCartList"})),{},{height:function(){return this.$baseTableHeight()}}),watch:{allTypes:function(e){this.queryForm.filtType=e},queryForm:{handler:function(e){this.getFiltData(e)},deep:!0}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.mergeCartList();case 3:case"end":return t.stop()}}),t)})))()},methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(i["d"])({addCartItem:"cart/addCartItem",delCartItem:"cart/delCartItem",getFiltData:"goods/getFiltData",setCurrenList:"goods/setCurrenList"})),Object(i["b"])({setGoodsList:"goods/setGoodsList"})),{},{mergeCartList:function(){var e=this,t=this.list.map((function(t){var a,r,o=(null===(a=e.cartList)||void 0===a||null===(r=a.find((function(e){return t.uuid===e.uuid})))||void 0===r?void 0:r.saled)||0;return Object(l["a"])(Object(l["a"])({},t),{},{saled:o})}));this.setCurrenList(t)},addedChange:function(e){Number(e.saled)>0?this.addCartItem(e):this.delCartItem(e)},clearSearchKey:function(){this.handleQuery()},tableSortChange:function(){var e=[];this.$refs.tableSort.tableData.forEach((function(t,a){e.push(t.img)})),this.imageList=e},setSelectRows:function(e){this.selectRows=e},handleAdd:function(){this.$refs["edit"].showEdit()},handleEdit:function(e){this.$refs["edit"].showEdit(e)},handleSizeChange:function(e){this.queryForm.pageSize=e},handleCurrentChange:function(e){this.queryForm.pageNo=e},handleQuery:function(){this.queryForm.pageNo=1},fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,e.setGoodsList();case 3:a=[],e.list.forEach((function(e,t){a.push(e.img)})),e.imageList=a,setTimeout((function(){e.listLoading=!1}),500);case 7:case"end":return t.stop()}}),t)})))()},selectAllTypes:function(){this.queryForm.filtType=this.queryForm.filtType.map((function(e){return Object.assign(e,{select:!e.select})}))}})},c=s,u=(a("cdfa"),a("2877")),d=Object(u["a"])(c,r,o,!1,null,null,null);t["default"]=d.exports},c277:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#2f3447"}},cdfa:function(e,t,a){"use strict";a("c277")}}]);