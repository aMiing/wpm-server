(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-959f4f5e"],{"36a2":function(e,t,r){"use strict";r("976d")},"91b6":function(e,t,r){"use strict";r.r(t),r.d(t,"uploadImg",(function(){return o}));var s=r("b775"),a="/upload/";function o(e){return Object(s["default"])({url:a+"uploadImg",method:"post",data:e})}},"976d":function(e,t,r){e.exports={"menu-color":"rgba(255,255,255,0.95)","menu-color-active":"rgba(255,255,255,0.95)","menu-background":"#2f3447"}},b072:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"systemConfig"},[r("div",{staticClass:"systemConfig-content"},[r("el-row",[r("h2",{staticClass:"systemConfig-content-head"},[e._v("系统信息管理")])]),r("el-row",[r("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[r("div",{staticClass:"system-form-content"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"系统名称",prop:"sys_name"}},[r("el-input",{attrs:{placeholder:"请输入系统名称（2-12个字符）"},model:{value:e.ruleForm.sys_name,callback:function(t){e.$set(e.ruleForm,"sys_name",t)},expression:"ruleForm.sys_name"}})],1),r("el-form-item",{attrs:{label:"图标",prop:"imageUrl"}},[r("el-upload",{ref:"logoUpload",staticClass:"avatar-uploader",attrs:{action:"/api/upload/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.sys_logo?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.sys_logo}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"主题"}},[r("el-radio-group",{model:{value:e.ruleForm.theme_name,callback:function(t){e.$set(e.ruleForm,"theme_name",t)},expression:"ruleForm.theme_name"}},[r("el-radio-button",{attrs:{label:"default"}},[e._v("默认")]),r("el-radio-button",{attrs:{label:"green"}},[e._v("绿荫草场")]),r("el-radio-button",{attrs:{label:"glory"}},[e._v("荣耀典藏")])],1),r("el-button",{staticClass:"theme-color-preview",attrs:{type:"text"},on:{click:e.previewTheme}},[e._v("预览")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("更新")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])],1)],1)])},a=[],o=r("1da1"),n=r("5530"),l=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("caad"),r("96cf"),r("2f62")),u=r("e9df"),m=(u.getAccessToken,r("91b6")),i=(m.uploadImg,r("c24f")),c=i.updateSysInfo,d={name:"systemConfig",data:function(){return{ruleForm:{sys_name:"",sys_logo:"",theme_name:""},rules:{sys_name:[{required:!0,message:"请输入系统名称或点击重置恢复默认",trigger:"blur"},{min:2,max:12,message:"长度在 2 到 12 个字符",trigger:"blur"}]},loadFileName:""}},computed:Object(n["a"])({},Object(l["c"])({systemInfo:"user/getSysInfo"})),mounted:function(){this.ruleForm=Object.assign({},this.systemInfo)},methods:Object(n["a"])(Object(n["a"])({},Object(l["d"])({setSysInfo:"user/setSysInfo"})),{},{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return e.prev=1,s={sys_name:t.ruleForm.sys_name,sys_logo:t.loadFileName||t.ruleForm.sys_logo,theme_name:t.ruleForm.theme_name},e.next=5,c(s);case 5:t.$baseMessage("保存成功！","success"),t.setSysInfo(s),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),t.$baseMessage("保存失败","error");case 12:e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields(),this.ruleForm=Object.assign({},this.systemInfo)},handleAvatarSuccess:function(e,t){this.loadFileName=t.response.filename,this.ruleForm.sys_logo=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t=["image/jpeg","image/jpg","image/png","image/gif"].includes(e.type),r=e.size/1024/1024<2;return t||this.$message.error("上传头像必须是图片格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},previewTheme:function(){document.getElementsByTagName("body")[0].className="vue-admin-theme-".concat(this.ruleForm.theme_name)}})},f=d,p=(r("36a2"),r("0c7c")),b=Object(p["a"])(f,s,a,!1,null,null,null);t["default"]=b.exports}}]);