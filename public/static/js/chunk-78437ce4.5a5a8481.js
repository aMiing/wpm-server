(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78437ce4"],{"0e6d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create"},[a("div",{staticClass:"create-content"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"grid-content single",on:{click:function(e){return t.handleCreateType("manual")}}},[t._v("手动输入")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content qrcode",on:{click:function(e){return t.handleCreateType("qrcode")}}},[t._v("条码搜索")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"grid-content batch",on:{click:function(e){return t.handleCreateType("batch")}}},[t._v("批量导入(excel)")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content more"},[t._v("更多方式...")])])],1)],1),a("table-edit",{ref:"edit"})],1)},l=[],i=a("dd5c"),n={name:"createGoods",components:{tableEdit:i["default"]},data:function(){return{}},methods:{handleCreateType:function(t){"manual"===t?this.$router.push({path:"/goods/stock",query:{operate:"add"}}):this.$refs.edit.showEdit(t)}}},r=n,o=(a("72e0"),a("0c7c")),c=Object(o["a"])(r,s,l,!1,null,"46c4d134",null);e["default"]=c.exports},2:function(t,e){},3:function(t,e){},"3f82":function(t,e,a){},4:function(t,e){},"72e0":function(t,e,a){"use strict";a("3f82")},dd5c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.close}},[a("div",{staticClass:"main"},[t.tableData.length?a("div",{staticClass:"table_content"},[a("span",[t._v("数据预览：")]),a("el-table",{attrs:{data:t.tableData}},t._l(t.tableHead,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label}})})),1)],1):a("div",{staticClass:"pre_page"},[a("div",{staticClass:"example"},[a("span",[t._v("1、先下载模板文件")]),a("a",{attrs:{href:t.excelUrl}},[t._v("批量导入商品模板.xlsx")])]),a("span",[t._v("2、按照模板格式编辑文件")]),a("div",{staticClass:"upload"},[a("span",[t._v("3、上传文件")]),a("el-upload",{ref:"upload",staticClass:"drag-upload",attrs:{drag:"",action:"",accept:".xls,.xlsx","on-progress":t.processFile}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xls/xlsx文件，且不超过1M")])])],1)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)])},l=[],i=a("1da1"),n=(a("96cf"),a("d81d"),a("fb6a"),a("4160"),a("d3b7"),a("159b"),a("ad8f")),r=a("f121"),o=a("1146"),c=a.n(o),d={name:"TableEdit",data:function(){return{title:"标题",type:"",dialogFormVisible:!1,excelUrl:r["excelUrl"]+"example.xlsx",tableData:[],tableHead:[{prop:"name",label:"名称"},{prop:"price",label:"单价"},{prop:"author",label:"生产商"},{prop:"stock",label:"库存"},{prop:"type",label:"类别"}],qrInput:""}},methods:{showEdit:function(t){if("batch"!==t)return this.title="条码搜索",void this.$baseMessage("敬请期待~","info");this.type=t,this.title="批量添加",this.dialogFormVisible=!0},close:function(){this.dialogFormVisible=!1,this.tableData=[]},processFile:function(t,e){var a=this,s=new FileReader;s.onload=function(t){var e=t.target.result,s=c.a.read(e,{type:"binary"}),l=s.SheetNames[0],i=s.Sheets[l],n=c.a.utils.sheet_to_json(i,{header:1}),r=n.slice(1).map((function(t){var e={};return t.forEach((function(t,s){e[a.tableHead[s].prop]=t||""})),e}));a.tableData=r},s.readAsBinaryString(e.raw)},save:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["doEdit"])(t.tableData,"create");case 2:a=e.sent,s=a.msg,a.code,a.data,t.$baseMessage(s,"success"),t.close();case 8:case"end":return e.stop()}}),e)})))()}}},u=d,p=a("0c7c"),f=Object(p["a"])(u,s,l,!1,null,null,null);e["default"]=f.exports}}]);